<ion-header>
  <ion-toolbar color="primary">
    <ion-title class="ion-text-center">📅 Book an Appointment</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- Doctor Card -->
  <ion-card class="doctor-card">
    <div class="doctor-container">
      <div class="doctor-image">
        <img [src]="doctor.image" alt="Doctor Image" />
      </div>
      <div class="doctor-details">
        <span class="specialty">{{ doctor.specialite }}</span>
        <h2>{{ doctor.nom }} {{ doctor.prenom }}</h2>
        <p class="email">{{ doctor.email }}</p>

        <div class="doctor-stats">
          <div class="stat-item">
            <span>⭐ {{ doctor.rating }}</span>
          </div>
          <div class="stat-item">
            <span>📍 {{ doctor.zone_geographique }}</span>
          </div>
        </div>
      </div>
    </div>
  </ion-card>

  <!-- Appointment Form -->
  <ion-card class="appointment-card">
    <ion-card-header>
      <ion-card-title>📋 Appointment</ion-card-title>
    </ion-card-header>
    <ion-card-content>

      <!-- Patient's Name -->
      <ion-item>
        <ion-label position="stacked">👤 Patient's Name</ion-label>
        <ion-input [(ngModel)]="patientName" placeholder="Enter your name"></ion-input>
      </ion-item>

      <!-- Select Date -->
      <ion-item>
        <ion-label position="stacked">📅 Select Date</ion-label>
        <ion-datetime 
          presentation="date"
          [multiple]="true"
          [(ngModel)]="selectedDates"
          [min]="minDate"
          [max]="maxDate"
          [highlightedDates]="highlightDates()"
          (ionChange)="dateSelected($event)">
        </ion-datetime>
      </ion-item>

      <!-- Display Selected Dates -->
      <ion-item *ngIf="selectedDates.length > 0">
        <ion-label>📆 Selected Date(s):</ion-label>
        <ion-text>{{ selectedDates.join(', ') }}</ion-text>
      </ion-item>

      <!-- Time Selection -->
      <div class="time-container">
        <ion-item>
          <ion-label position="stacked">🕒 Start Time</ion-label>
          <ion-input [(ngModel)]="startTime" type="time"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">🕓 End Time</ion-label>
          <ion-input [(ngModel)]="endTime" type="time"></ion-input>
        </ion-item>
      </div>

      <!-- Complaint -->
      <ion-item>
        <ion-label position="stacked">📄 Complaint</ion-label>
        <ion-textarea [(ngModel)]="complaint" placeholder="Describe your symptoms..."></ion-textarea>
      </ion-item>

      <!-- Appointment Button -->
      <ion-button expand="full" class="appointment-btn" (click)="makeAppointment()">
        📌 Book Appointment
      </ion-button>

    </ion-card-content>
  </ion-card>

</ion-content>
